const TelegramBot = require('node-telegram-bot-api');

// ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶ü‡ßá‡¶∞ ‡¶ü‡ßã‡¶ï‡ßá‡¶®
const token = '8279372040:AAGKfFsmnkI5ihQE-T2v6hU47dEoZ892_nA'; 
const bot = new TelegramBot(token);

module.exports = async (request, response) => {
    if (request.method === 'POST') {
        const { body } = request;

        if (body.message) {
            const chatId = body.message.chat.id;
            const text = body.message.text;

            if (text === '/start') {
                await bot.sendMessage(chatId, "‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ @Lamiashek_bot-‡¶è! \n‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶Ü‡¶®‡¶≤‡¶ï ‡¶ï‡¶∞‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§", {
                    reply_markup: {
                        inline_keyboard: [[
                            {
                                text: "üîì Unlock Content",
                                web_app: { url: `https://${request.headers.host}/index.html` }
                            }
                        ]]
                    }
                });
            }
        }
        response.status(200).send('OK');
    } else {
        response.status(200).send('Bot is running');
    }
};
